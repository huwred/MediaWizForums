var MediaWiz=MediaWiz||{tools:"code undo redo | styleselect | bullist numlist | indent outdent | link codesample emoticons",returnUrl:"",deletePost:function(n){if(window.confirm("Are you sure you want to delete this post?")){var t=$.get("/deletepost/"+n);t.done(function(){location.reload()});t.fail(function(){alert("sorry, there was an error deleting this post")})}},editPost:function(n){$.ajax({type:"GET",url:"/umbraco/surface/forumssurface/editPost/"+n,success:function(n){$("#partial-form").html(n)},error:function(n){console.log(n);alert(n)}})},lockPost:function(n){if(window.confirm("Are you sure you want to lock/unlock this post?")){var t=$.get("/umbraco/surface/forumssurface/lockpost/"+n);t.done(function(){location.reload()});t.fail(function(n){alert("sorry, there was an error locking this post"+n)})}},lockUser:function(n,t){$.ajax({type:"GET",url:"/lockuser/"+n+"/?mode="+t,success:function(n){n&&location.reload(!0)},error:function(n){alert(n)}})},captchaCheck:function(n){$.ajax({url:"/captchacheck/"+n,type:"GET",success:function(n){return n?!0:!1},error:function(n){return console.log(n),!1}})},InitTinyMce:function(n){window.tinymce.init({selector:n,browser_spellcheck:!0,contextmenu:!1,plugins:"link lists anchor codesample image code emoticons",toolbar:MediaWiz.tools,file_picker_types:"image",images_upload_url:"/forumupload",images_reuse_filename:!0,statusbar:!1,menubar:!1,relative_urls:!1,remove_script_host:!1,convert_urls:!0,init_instance_callback:function(n){n.on("OpenWindow",function(){$('[role=tab]:contains("General")').hide()})}});document.addEventListener("focusin",n=>{n.target.closest(".tox-tinymce-aux, .moxman-window, .tam-assetmanager-root")!==null&&n.stopImmediatePropagation()})}};$(document).ready(function(){MediaWiz.returnUrl.length>1&&window.pageRedirect(MediaWiz.returnUrl);$(".btn-cancel").on("click",function(){history.back()});$(".post-delete").click(function(n){n.stopPropagation();n.preventDefault();MediaWiz.deletePost($(this).data("postid"))});$(".post-lock").on("click",function(n){n.stopPropagation();n.preventDefault();MediaWiz.lockPost($(this).data("postid"))});$(".post-edit").on("click",function(n){n.stopPropagation();n.preventDefault();MediaWiz.editPost($(this).data("postid"))});$(".lock-user").on("click",function(n){n.stopPropagation();n.preventDefault();MediaWiz.lockUser($(this).data("userid"),$(this).data("mode"))});$("#editPostModal").on("show.bs.modal",function(){setTimeout(function(){MediaWiz.InitTinyMce("textarea.edit-body")},300)});$("#editPostModal").on("hide.bs.modal",function(){tinymce.remove("#partial-form textarea")})});